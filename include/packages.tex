%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% Packages %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% \usepackage{calligra}                %% for dedication
\usepackage{graphics}
\usepackage{epsfig}
\usepackage{times}
\usepackage{fixltx2e}                %% for \textsubscript command
\usepackage{amsmath}
\usepackage{amsthm}                  %% Theorems and definitions
\usepackage{thmtools}                %% for Theorems tools, allows autoref to work with lemmas
\usepackage{amssymb}                 %% for more arrows like rightarrowtail
\usepackage{amsfonts}                %% \mathbb
\usepackage{mathtools}               %% for coloneqq and others
\usepackage{cases}                   %% better math brackets
\usepackage{mathpartir}              %%% for inference rules
\usepackage[nolist]{acronym}
\usepackage[colorlinks]{hyperref}    %% for auto references
\usepackage{xpunctuate}              %% for punctuation's after macros
% \usepackage{cite}                  %% for bibliography ranges
\usepackage{subcaption}              %% For complex figures with subfigures/subcaptions
\usepackage{wrapfig}                 %% wrapping figures around text
\usepackage{listings}                %% for source code lstlisting
\usepackage[dvipsnames]{xcolor}      %% For listings
\usepackage{caption}
\usepackage[textwidth=35mm,textsize=footnotesize]{todonotes}
\usepackage{suffix}                  %% star version of commands
\usepackage{tikz}                    %% assertion stack visualization
\usepackage[T1]{fontenc}             %% For escaping special characters in bibtex
\usetikzlibrary{matrix}
\usetikzlibrary{arrows}
\usetikzlibrary{positioning}
\usetikzlibrary{shapes.multipart}
\usetikzlibrary{automata}
\usetikzlibrary{cd}                  %% for commuting diagrams


%%%%% Custom
\usepackage{lib/cc}
\usepackage{lib/lambda}
\usepackage{lib/thesis}

%%%%% Non-ACM
\usepackage[numbers]{natbib}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% Packages Config %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%% Hyperref config %%%%%%%%%%%%%%%%
\newcommand\myshade{85}
\colorlet{mylinkcolor}{NavyBlue}
\colorlet{mycitecolor}{Aquamarine}
% \colorlet{myurlcolor}{Aquamarine}

\hypersetup{
  linkcolor  = mylinkcolor!,
  citecolor  = mycitecolor,
  % urlcolor   = myurlcolor!\myshade!black,
  colorlinks = true,
}

%%%%%%%%%%%%%%%% Listings config %%%%%%%%%%%%%%%%
\lstdefinelanguage{SMTLIB}{
    alsoletter={\-},
    morekeywords={push,pop,assert,check-sat,declare,const,define,fun,and,or,not,check,sat,get,model,reset},
    morecomment=[l]{;},
    morestring=[b]{"},
    sensitive=false,
}

\lstset{
  frame=top,frame=bottom,
  basicstyle=\linespread{.99}\small\normalfont\sffamily,    % the size of the fonts that are used for the code
  commentstyle=\color{Gray},
  keywordstyle=\color{NavyBlue},
  stepnumber=1,                           % the step between two line-numbers. If it is 1 each line will be numbered
  numbersep=10pt,                         % how far the line-numbers are from the code
  tabsize=2,                              % tab size in blank spaces
  extendedchars=true,                     %
  breaklines=true,                        % sets automatic line breaking
  captionpos=t,                           % sets the caption-position to top
  mathescape=true,
  showstringspaces=false,
  escapeinside={(*@}{@*)},%
  literate = {-}{-}1
 }

\newcommand{\lstvdots}{%
  \raisebox{-1pt}[0pt][0pt]{%
    \scalebox{0.7}{\ensuremath{\vdots}}}%
  \hspace{-1.5pt}}

\reversemarginpar

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% Math
%%%% new environment for sub-proofs
\newenvironment{subproof}[1][\proofname]{%
  \renewcommand{\qedsymbol}{\ensuremath{\blacksquare}}%
  \begin{proof}[#1]%
}{%
  \end{proof}%
}
\newtheorem{theorem}{Theorem}[section]
\newtheorem{corollary}{Corollary}[theorem]
\newtheorem{lemma}[theorem]{Lemma}
\theoremstyle{definition}
\newtheorem{definition}{Definition}[section]

\renewcommand{\chapterautorefname}{Chapter}%
\renewcommand{\sectionautorefname}{Section}%

% \tikzset{close/.style={near start,outer sep=-20pt}}
\tikzcdset{
    every label/.append style = {scale=1.6},
    cells={nodes={font=\Large}}
    }

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% hacky way to not split footnotes
\interfootnotelinepenalty=10000
\raggedbottom

\newenvironment{dedication*}
  {%\clearpage           % we want a new page          %% I commented this
  \centering
   \thispagestyle{empty}% no header and footer
   \vspace*{\stretch{1}}% some space at the top
   \itshape             % the text is in italics
   % \raggedleft          % flush to the right margin
  }
  {\par % end the paragraph
   \vspace{\stretch{3}} % space at bottom is three times that at the top
   \clearpage           % finish off the page
  }